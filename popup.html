<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>HappyPhone Assistant</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <header class="app-header">
    <h1>HappyPhone</h1>
    <div class="app-meta">
      <button class="settings-button" aria-label="Settings">
        <span class="icon-gear"></span>
      </button>
      <span class="app-version">v0.1.0</span>
    </div>
  </header>

  <main class="app-layout">
    <div class="cards-row">
      <section class="info-card" id="contact-card">
        <header class="info-card__header">
          <h2>Contact Information</h2>
        </header>
        <div class="info-card__body">
          <div class="form-fields">
            <div class="form-field">
              <label for="contact-name">Name</label>
              <input type="text" id="contact-name" placeholder="Enter name">
            </div>
            <div class="form-field">
              <label for="contact-email">Email</label>
              <input type="email" id="contact-email" placeholder="Enter email">
            </div>
            <div class="form-field">
              <label for="contact-phone">Phone</label>
              <input type="tel" id="contact-phone" placeholder="Enter phone">
            </div>
            <div class="form-field">
              <label>Preferred Contact Method</label>
              <div class="checkbox-group">
                <label class="checkbox">
                  <input type="checkbox" id="contact-method-email">
                  <span>Email</span>
                </label>
                <label class="checkbox">
                  <input type="checkbox" id="contact-method-sms">
                  <span>Text Message (SMS)</span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="info-card" id="ticket-card">
        <header class="info-card__header collapsible" data-target="#ticket-card-body">
          <h2>Ticket Information</h2>
          <span class="collapse-icon" aria-hidden="true"></span>
        </header>
        <div class="info-card__body collapsible-body" id="ticket-card-body">
          <div class="form-fields">
            <div class="form-field">
              <label for="ticket-county">County*</label>
              <select id="ticket-county">
                <option value="">Select county...</option>
                <!-- Populated dynamically from config.json -->
              </select>
            </div>
            <div class="form-field">
              <label for="ticket-legal-issue">Legal Issue*</label>
              <select id="ticket-legal-issue">
                <option value="">Select legal issue...</option>
                <!-- Populated dynamically from config.json -->
              </select>
            </div>
            <div class="form-field" id="legal-issue-checkboxes">
              <!-- Checkboxes populated dynamically based on Legal Issue selection -->
            </div>
          </div>
        </div>
      </section>
    </div>

    <section class="editor-panel">
      <textarea id="note-editor" class="note-editor" placeholder="Start typing your noteâ€¦"></textarea>
    </section>
  </main>

  <footer class="action-bar">
    <div class="ticket-meta">
      <span class="ticket-number" id="ticket-number">Ticket#</span>
      <span class="ticket-title" id="ticket-title">TicketTitle</span>
    </div>

    <div class="action-controls">
      <button class="secondary-btn" id="get-ticket-data-btn">Get Ticket Data</button>
      <button class="secondary-btn" id="previous-calls-btn">Previous Calls</button>

      <label class="checkbox">
        <input type="checkbox" id="internal-note-toggle" checked>
        <span>Internal Note?</span>
      </label>

      <button class="danger-btn" id="clear-fields-btn">Clear Fields</button>
      <button class="primary-btn" id="add-to-ticket-btn">Add to Ticket</button>
    </div>
  </footer>

  <!-- Previous Calls Modal -->
  <dialog class="modal" id="previous-calls-modal">
    <form method="dialog" class="modal__content">
      <header class="modal__header">
        <h3>Previous Calls</h3>
        <button type="submit" class="modal__close" aria-label="Close">
          <span class="icon-close"></span>
        </button>
      </header>
      <ul class="call-history" id="call-history-list">
        <!-- populated dynamically -->
      </ul>
      <footer class="modal__footer">
        <button type="submit" class="secondary-btn">Close</button>
      </footer>
    </form>
  </dialog>

  <script src="popup.js" type="module"></script>
</body>
</html>
